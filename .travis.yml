language: node_js
sudo: false
node_js:
- '0.12'
git:
  submodules: false
cache:
  directories:
  - node_modules
before_install:
- echo -e "machine github.com\n  login $CI_USER_TOKEN" >> ~/.netrc
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && git fetch && git checkout layout || true'
install:
- npm install
- npm prune
script: npm run build
after_script:
- bash ./deploy.sh
env:
  global:
  - GH_REF: github.com/ruuvi/ruuvi.github.io.git
  - secure: Aa1/mHjw/ChuFsy1oyekhCbcvjVTGG6v9bdapBqSEFgXIuV1N2/l0D8M5Pn2xsvVnt+zDrEj30xXOtHb0CryM9t+E0y1ezbsheq7doTtZoX6bShEMwV1absv9qJlL4QacvBbbWYULwRMM4bbVXNHpyaHBcur1bHvcsqm54ZuAm+MmxqRew4/GFDvYkZyO8FwzRf2Reo4TxSUIhkRPBYA3jDEF8Vi0rkOphFkD3swm+IwOoXUa9ZmER7b4dzcHOEh/D+Nbgx5f2AhPlQnDam7KfxIdHUlDkzrOyq8JTyZIhT8BmRrUpj9Vdki3b678XiSinvMN7w2oQfah7uRf3bPXHeaBI2Xq+whkPB8HlCMR+87voHXZu0dei7ESASTgeRRRE6Ipc8DKw+T9SanFBQ/3Th2m9xLPxP24VZpuIIXz12ztnd1adhIENiVdt2xrqUSGOdjjicZtGPkzucXeIgZvlFp+CwGrm3gMHxZ5xYT6ZfBPfI68So8TNrL39AuJ/jQmmcSYcM+r99Kb1ZnHhWkUyzPjpUdVHHw3Jxy7yk2orkLL2dabjHqqaww9bF1CVbyb14dfehYCA/dji6Pd65yo/vOvUlx8c8vJIdylJMgMXR3sspt+xWUOJZyUTXL+c5QWv/4UncuKdmZEqXQOQb+OpVLGFzNao8k3uVARefKc8Q=

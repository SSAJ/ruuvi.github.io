<!doctype html>
<html class="two-columns">
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
  
  <title>Ruuvi Guides | Command Line</title>
  
  <!-- Spark theme mods -->
  <link href='/assets/css/style.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://s3.amazonaws.com/icomoon.io/49057/Dashboard/style.css?9t9e91">
  
  <!-- GOTHAM YO -->
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6107112/665726/css/fonts.css" />
  
  <!-- Meta -->
  <meta content="Ruuvi" property="og:title">
  <meta content="Documentation for Ruuvi, a platform for connected devices." name="description">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/favicon2.ico" type="image/x-icon" />
</head>
<body>
  <div id="docs" data-level>
    <div class='header'>
      <div class='left'>
        <div class="toggle-nav">
          <a href="#" class="subnav-link toggle-navigation">
            <i class="ion-navicon" title="show/hide the navigation"></i>
          </a>
        </div>
        <a href="http://www.ruuvi.com">
          <img src="/assets/images/ruuvi_logo.png" id="logo">
        </a>
        <div class="sections">
          <a class="nav active" href="/guide">Guide</a>
          <a class="nav " href="/datasheets">Datasheets</a>
        </div>
        <div class="dropdown mobile-only">
          <a id="dLabel" data-target="#" class="nav" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            Guide
            <i class="icon ion-chevron-down"></i>
          </a>
          <ul class="dropdown-menu" aria-labelledby="dLabel">
            <li><a href="/guide">Guide</a></li>
            <li><a href="/datasheets">Datasheets</a></li>
          </ul>
        </div>
        <div class="search">
          <div class="search-input-wrapper">
            <i class="ion-search"></i>
            <input class="search-box" type="text" placeholder="Search" value=""/>
          </div>
          <div class="search-results">
          </div>
        </div>
      </div>
      <div class='right'>
        <a href='https://github.com/ruuvi/ruuvi.github.io/tree/layout/src/content/guide/tools-and-features/cli.md' class="nav" target="_blank"><i class="ion-edit"></i>Edit</a>
      </div>
    </div>

    <div class='content-root'>
      <div class='menubar'>

      <ul class="nav guide-menu">
        <li data-level="1" class="guide-section ">
          <h3 class="guide-section-titles" >Getting Started</h3>
            <ol type="1">
                <li class="top-level " data-level="1.1">
                    <a href="/guide/getting-started/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="1.2">
                    <a href="/guide/getting-started/start">Getting started</a>
                </li>
                <li class="top-level " data-level="1.3">
                    <a href="/guide/getting-started/connect">Connecting Your Device</a>
                </li>
                <li class="top-level " data-level="1.4">
                    <a href="/guide/getting-started/modes">Device Modes</a>
                </li>
                <li class="top-level " data-level="1.5">
                    <a href="/guide/getting-started/tinker">Tinker &amp; Mobile App</a>
                </li>
                <li class="top-level " data-level="1.6">
                    <a href="/guide/getting-started/build">Web IDE (Build)</a>
                </li>
                <li class="top-level " data-level="1.7">
                    <a href="/guide/getting-started/examples">Code Examples</a>
                </li>
                <li class="top-level " data-level="1.8">
                    <a href="/guide/getting-started/button">Internet Button</a>
                </li>
                <li class="top-level " data-level="1.9">
                    <a href="/guide/getting-started/contributing">Open Source</a>
                </li>
                <li class="top-level " data-level="1.10">
                    <a href="/guide/getting-started/hackathon">Hackathon</a>
                </li>
            </ol>
          </li>
        <li data-level="2" class="guide-section active-section">
          <h3 class="guide-section-titles" >Tools And Features</h3>
            <ol type="1">
                <li class="top-level " data-level="2.1">
                    <a href="/guide/tools-and-features/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="2.2">
                    <a href="/guide/tools-and-features/dev">Ruuvi Dev</a>
                </li>
                <li class="top-level " data-level="2.3">
                    <a href="/guide/tools-and-features/dashboard">Dashboard</a>
                </li>
                <li class="top-level active" data-level="2.4">
                    <span>Command Line</span>
                      <i id="toggle-in-page-nav" class="ion-minus"></i>
                </li>
                    <div class="in-page-toc-container">
                      <ul class="nav in-page-toc show">
                        <li class="middle-level" data-nav="installing-puCb"><i class="toggle-secondary-toc ion-arrow-right-b"></i><a href="#installing" data-menu-href="installing-puCb">Installing</a></li>
                            <ul class="nav secondary-in-page-toc">
                                <li data-secondary-nav="upgrading-from-the-spark-cli-r6rN"><a href="#upgrading-from-the-spark-cli" data-menu-href="upgrading-from-the-spark-cli-r6rN">Upgrading from the Spark CLI</a></li>
                                <li data-secondary-nav="advanced-install-zI87"><a href="#advanced-install" data-menu-href="advanced-install-zI87">Advanced Install</a></li>
                                <li data-secondary-nav="upgrading-to-the-latest-version-tssP"><a href="#upgrading-to-the-latest-version" data-menu-href="upgrading-to-the-latest-version-tssP">Upgrading to the latest version</a></li>
                                <li data-secondary-nav="running-from-source-advanced--NAye"><a href="#running-from-source-advanced-" data-menu-href="running-from-source-advanced--NAye">Running from source (advanced)</a></li>
                            </ul>
                        <li class="middle-level" data-nav="getting-started-eh1y"><i class="toggle-secondary-toc ion-arrow-right-b"></i><a href="#getting-started" data-menu-href="getting-started-eh1y">Getting Started</a></li>
                            <ul class="nav secondary-in-page-toc">
                                <li data-secondary-nav="ruuvi-setup-CH2u"><a href="#ruuvi-setup" data-menu-href="ruuvi-setup-CH2u">ruuvi setup</a></li>
                                <li data-secondary-nav="ruuvi-help-g6QP"><a href="#ruuvi-help" data-menu-href="ruuvi-help-g6QP">ruuvi help</a></li>
                            </ul>
                        <li class="middle-level" data-nav="blink-an-led-with-tinker-aary"><a href="#blink-an-led-with-tinker" data-menu-href="blink-an-led-with-tinker-aary">Blink an LED with Tinker</a></li>
                        <li class="middle-level" data-nav="update-your-device-remotely-cADx"><a href="#update-your-device-remotely" data-menu-href="update-your-device-remotely-cADx">Update your device remotely</a></li>
                        <li class="middle-level" data-nav="reference-lzRq"><a href="#reference" data-menu-href="reference-lzRq">Reference</a></li>
                      </ul>
                    </div>
                <li class="top-level " data-level="2.5">
                    <a href="/guide/tools-and-features/ifttt">IFTTT</a>
                </li>
                <li class="top-level " data-level="2.6">
                    <a href="/guide/tools-and-features/webhooks">Webhooks</a>
                </li>
            </ol>
          </li>
        <li data-level="3" class="guide-section ">
          <h3 class="guide-section-titles" >How To Build A Product</h3>
            <ol type="1">
                <li class="top-level " data-level="3.1">
                    <a href="/guide/how-to-build-a-product/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="3.2">
                    <a href="/guide/how-to-build-a-product/pcb-design">Designing your own PCB</a>
                </li>
                <li class="top-level " data-level="3.3">
                    <a href="/guide/how-to-build-a-product/dashboard">Your Ruuvi Dashboard</a>
                </li>
                <li class="top-level " data-level="3.4">
                    <a href="/guide/how-to-build-a-product/authentication">Authentication &amp; Security</a>
                </li>
                <li class="top-level " data-level="3.5">
                    <a href="/guide/how-to-build-a-product/web-app">Building your own web app</a>
                </li>
                <li class="top-level " data-level="3.6">
                    <a href="/guide/how-to-build-a-product/mobile-app">Building your own mobile app (iOS and Android)</a>
                </li>
                <li class="top-level " data-level="3.7">
                    <a href="/guide/how-to-build-a-product/manufacturing">Manufacturing, programming, and testing</a>
                </li>
                <li class="top-level " data-level="3.8">
                    <a href="/guide/how-to-build-a-product/further-considerations">Further considerations</a>
                </li>
            </ol>
          </li>
      </ul>
      </div>
      <div class="page-body">
        <div class='content-inner'>
          <div class="content" >
            <h1 id="#ruuvi-cli" data-href="ruuvi-cli-B2sY">Ruuvi CLI<a href="#ruuvi-cli" class="header-permalinks" data-menu-href="ruuvi-cli-B2sY"><i class="ion-link"></i></a></h1><p>The Ruuvi CLI is a powerful tool for interacting with your devices and the Particle Cloud.  The CLI uses <a href="http://nodejs.org/">node.js</a> and can easily run on Windows, Mac OS X, and Linux.  It's also <a href="https://github.com/spark/ruuvi-cli">open source</a> so you can edit and change it, and even send in your changes as <a href="https://help.github.com/articles/using-pull-requests/">pull requests</a> if you want to share!</p>
<h2 id="#installing" data-href="installing-puCb">Installing<a href="#installing" class="header-permalinks" data-menu-href="installing-puCb"><i class="ion-link"></i></a></h2><p>  First, make sure you have <a href="http://nodejs.org/">node.js</a> installed!</p>
<p>  Next, open a command prompt or terminal, and install by typing:</p>
<pre><code class="lang-sh"># how to install the ruuvi-cli
$ npm install -g ruuvi-cli
$ ruuvi login
</code></pre>
<p>For more advanced install instructions, see below.</p>
<h3 id="#upgrading-from-the-spark-cli" data-href="upgrading-from-the-spark-cli-r6rN">Upgrading from the Spark CLI<a href="#upgrading-from-the-spark-cli" class="header-permalinks" data-menu-href="upgrading-from-the-spark-cli-r6rN"><i class="ion-link"></i></a></h3><p>If you have already installed <code>spark-cli</code>, please uninstall it before installing the Ruuvi CLI. Simply type: <code>npm uninstall -g spark-cli</code> into the command line.</p>
<p>Once this is done, then run <code>npm install -g ruuvi-cli</code> to install the Ruuvi CLI.</p>
<h3 id="#advanced-install" data-href="advanced-install-zI87">Advanced Install<a href="#advanced-install" class="header-permalinks" data-menu-href="advanced-install-zI87"><i class="ion-link"></i></a></h3><p>To use the local flash and key features you'll also need to install <a href="https://s3.amazonaws.com/spark-assets/dfu-util-0.8-binaries.tar.xz">dfu-util</a>, and <a href="http://www.openssl.org/">openssl</a>.  They are freely available and open-source, and there are installers and binaries for most major platforms.</p>
<p>Here are some great tutorials on the community for full installs:</p>
<p><a href="https://community.ruuvi.io/t/how-to-install-spark-cli-on-ubuntu-12-04/3474">Installing on Ubuntu 12.04</a></p>
<p><a href="https://community.ruuvi.io/t/how-to-install-the-spark-toolchain-in-ubuntu-14-04/4139">Installing on Ubuntu 14.04</a></p>
<p><a href="https://community.ruuvi.io/t/tutorial-spark-cli-on-windows-06-may-2014/3112">Installing on Windows</a></p>
<p><a href="http://community.ruuvi.io/t/tutorial-particle-cli-on-mac-osx-07-jun-2015/5225">Installing on Mac</a></p>
<h3 id="#upgrading-to-the-latest-version" data-href="upgrading-to-the-latest-version-tssP">Upgrading to the latest version<a href="#upgrading-to-the-latest-version" class="header-permalinks" data-menu-href="upgrading-to-the-latest-version-tssP"><i class="ion-link"></i></a></h3><p>To upgrade Ruuvi-CLI, enter the following command:</p>
<pre><code class="lang-sh"># how to update the ruuvi-cli
$ npm update -g ruuvi-cli
</code></pre>
<h3 id="#running-from-source-advanced-" data-href="running-from-source-advanced--NAye">Running from source (advanced)<a href="#running-from-source-advanced-" class="header-permalinks" data-menu-href="running-from-source-advanced--NAye"><i class="ion-link"></i></a></h3><p>To grab the CLI source and play with it locally</p>
<pre><code class="lang-sh"># how to get the source code for the CLI
$ git clone git@github.com:spark/ruuvi-cli.git
$ cd ruuvi-cli
$ npm install
$ node app.js help
</code></pre>
<h2 id="#getting-started" data-href="getting-started-eh1y">Getting Started<a href="#getting-started" class="header-permalinks" data-menu-href="getting-started-eh1y"><i class="ion-link"></i></a></h2><p>  These next two commands are all you need to get started setting up an account, claiming a device, and discovering new features.</p>
<h3 id="#ruuvi-setup" data-href="ruuvi-setup-CH2u">ruuvi setup<a href="#ruuvi-setup" class="header-permalinks" data-menu-href="ruuvi-setup-CH2u"><i class="ion-link"></i></a></h3><p>  This command will guide you through logging in or creating a new account as well as claiming your device!</p>
<pre><code class="lang-sh"># how to setup your account and your device
$ ruuvi setup
</code></pre>
<h3 id="#ruuvi-help" data-href="ruuvi-help-g6QP">ruuvi help<a href="#ruuvi-help" class="header-permalinks" data-menu-href="ruuvi-help-g6QP"><i class="ion-link"></i></a></h3><p>  Shows you what commands are available and how to use them.  You can also give the name of a command for detailed help.</p>
<pre><code class="lang-sh"># how to get help
$ ruuvi help
$ ruuvi help keys
</code></pre>
<h2 id="#blink-an-led-with-tinker" data-href="blink-an-led-with-tinker-aary">Blink an LED with Tinker<a href="#blink-an-led-with-tinker" class="header-permalinks" data-menu-href="blink-an-led-with-tinker-aary"><i class="ion-link"></i></a></h2><p>If you're just opening a new device, chances are it's already loaded with Tinker, the app we load at the factory.  If you don't have Tinker, or if you've been using the build IDE already, let's load it quickly by typing:</p>
<pre><code class="lang-sh"># How to re-load tinker onto a device
$ ruuvi flash my_new_device_name tinker
Including:
/usr/local/lib/node_modules/ruuvi-cli/binaries/particle_tinker.bin
attempting to flash firmware to your device my_new_device_name
flash device said  {"id":"0123456789ABCDEFGHI","status":"Update started"}
</code></pre>
<p>Let's make sure your device is online and loaded with Tinker.  We should see the four characteristic functions exposed by Tinker, "digitalwrite", "digitalread", "analogwrite", and "analogread".</p>
<pre><code class="lang-sh"># how to show all your devices and their functions and variables
$ ruuvi list

Checking with the cloud...
Retrieving devices... (this might take a few seconds)
my_device_name (0123456789ABCDEFGHI) 0 variables, and 4 functions
  Functions:
    int digitalread(String args)
    int digitalwrite(String args)
    int analogread(String args)
    int analogwrite(String args)
</code></pre>
<p>Let's try turning on the LED attached to pin D7 on your device.</p>
<pre><code class="lang-sh"># how to call a function on your device
$ ruuvi call my_device_name digitalwrite D7,HIGH
1
$ ruuvi call my_device_name digitalwrite D7,LOW
1
</code></pre>
<p>Nice!  You should have seen the small blue LED turn on, and then off.</p>
<h2 id="#update-your-device-remotely" data-href="update-your-device-remotely-cADx">Update your device remotely<a href="#update-your-device-remotely" class="header-permalinks" data-menu-href="update-your-device-remotely-cADx"><i class="ion-link"></i></a></h2><p>You can write whole apps and flash them remotely from the command line just as you would from the build IDE.  Let's write a small blink sketch to try it out.</p>
<p>Copy and paste the following program into a file called blinky.ino</p>
<pre><code class="lang-ino">#Copy me to blinky.ino
#define PIN D7
int state = 0;

void setup() {
    //tell the device we want to write to this pin
    pinMode(PIN, OUTPUT);
}
void loop() {
    //alternate the PIN between high and low
    digitalWrite(PIN, (state) ? HIGH : LOW);

    //invert the state
    state = !state;

    //wait half a second
    delay(500);
}
</code></pre>
<p>Then let's compile that program to make sure it's valid code.  The CLI will automatically download the compiled binary of your program if everything went well, and show you the url.  The server will also keep a copy of your binary around for you for about 24 hours.</p>
<pre><code class="lang-sh"># how to compile a program without flashing to your device
$ ruuvi compile blinky.ino
Including:
blinky.ino
attempting to compile firmware
pushing file: blinky.ino
grabbing binary from: https://api.ruuvi.io/v1/binaries/01234567890ABCDEFGH
saved firmware to firmware_123456781234.bin
Compiled firmware downloaded.
</code></pre>
<p>Now that we have a valid program, let's flash it to our device!  We can use either the source code again, or we can send our binary.</p>
<pre><code class="lang-sh"># how to flash a program to your device (from source code)
$ ruuvi flash my_device_name blinky.ino

# OR - how to flash a pre-compiled binary to your device
$ ruuvi flash my_device_name firmware_123456781234.bin
Including:
firmware_123456781234.bin
attempting to flash firmware to your device my_device_name
flash device said  {"id":"01234567890ABCDEFGH","status":"Update started"}
</code></pre>
<h2 id="#reference" data-href="reference-lzRq">Reference<a href="#reference" class="header-permalinks" data-menu-href="reference-lzRq"><i class="ion-link"></i></a></h2><p>For more info on CLI commands, go <a href="../../../../reference/cli">here</a>.</p>

            <div class="mobile-arrows">
                <a href="/guide/tools-and-features/dashboard" class="arrow previous-arrow"><i class="ion-chevron-left"></i></a>
                <a href="/guide/tools-and-features/ifttt" class="arrow next-arrow"><i class="ion-chevron-right"></i></a>
            </div>
          </div>
        </div>
        <div class="desktop-arrows">
            <a href="/guide/tools-and-features/dashboard" class="arrow previous-arrow"><i class="ion-chevron-left"></i></a>
            <a href="/guide/tools-and-features/ifttt" class="arrow next-arrow"><i class="ion-chevron-right"></i></a>
        </div>
      </div>
    </div>
    <!-- SEGMENT -->
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
          analytics.load("PiTQtuDPGp3hKGGN3lU9GJvInSsnKBCR");
        analytics.page()
      }}();
    </script>
    <!-- Let me embed vines -->
    <script async src="https://platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>
    
    <!-- jQuery -->
    <script src="/assets/js/jquery-1.11.1.min.js"></script>
    
    <!-- Vendor theme mods -->
    <script src='/assets/js/jquery-styling.js'></script>
    <script src='/assets/js/bootstrap-dropdown.js'></script>
    <script src='/assets/js/prettify.js'></script>
    <script src='/assets/js/jquery.waypoints.js'></script>
    <script src='/assets/js/jquery.waypoints.inview.js'></script>
    <!-- Custom -->
    <script type="text/javascript" src="https://s3.amazonaws.com/redirect.ruuvi.io/redirect-banner.js"></script>
    <script type="text/javascript" src="/assets/js/lunr.min.js"></script>
    <script type="text/javascript" src="/assets/js/handlebars-runtime.js"></script>
    <script type="text/javascript" src="/assets/js/precompiled.js"></script>
    <script src='/assets/js/docs.js'></script>
    <script src='/assets/js/ga.js'></script>
    <script src='/assets/js/animated-ruuvitracker.js'></script>
    
    <!-- Live Reload -->
</body>
</html>

<!doctype html>
<html class="two-columns">
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
  
  <title>Ruuvi Guides | IFTTT</title>
  
  <!-- Spark theme mods -->
  <link href='/assets/css/style.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://s3.amazonaws.com/icomoon.io/49057/Dashboard/style.css?9t9e91">
  
  <!-- GOTHAM YO -->
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6107112/665726/css/fonts.css" />
  
  <!-- Meta -->
  <meta content="Ruuvi" property="og:title">
  <meta content="Documentation for Ruuvi, a platform for connected devices." name="description">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/favicon2.ico" type="image/x-icon" />
</head>
<body>
  <div id="docs" data-level>
    <div class='header'>
      <div class='left'>
        <div class="toggle-nav">
          <a href="#" class="subnav-link toggle-navigation">
            <i class="ion-navicon" title="show/hide the navigation"></i>
          </a>
        </div>
        <a href="http://www.ruuvi.com">
          <img src="/assets/images/ruuvi_logo.png" id="logo">
        </a>
        <div class="sections">
          <a class="nav active" href="/guide">Guide</a>
          <a class="nav " href="/datasheets">Datasheets</a>
        </div>
        <div class="dropdown mobile-only">
          <a id="dLabel" data-target="#" class="nav" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            Guide
            <i class="icon ion-chevron-down"></i>
          </a>
          <ul class="dropdown-menu" aria-labelledby="dLabel">
            <li><a href="/guide">Guide</a></li>
            <li><a href="/datasheets">Datasheets</a></li>
          </ul>
        </div>
        <div class="search">
          <div class="search-input-wrapper">
            <i class="ion-search"></i>
            <input class="search-box" type="text" placeholder="Search" value=""/>
          </div>
          <div class="search-results">
          </div>
        </div>
      </div>
      <div class='right'>
        <a href='https://github.com/ruuvi/ruuvi.github.io/tree/layout/src/content/guide/tools-and-features/ifttt.md' class="nav" target="_blank"><i class="ion-edit"></i>Edit</a>
      </div>
    </div>

    <div class='content-root'>
      <div class='menubar'>

      <ul class="nav guide-menu">
        <li data-level="1" class="guide-section ">
          <h3 class="guide-section-titles" >Getting Started</h3>
            <ol type="1">
                <li class="top-level " data-level="1.1">
                    <a href="/guide/getting-started/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="1.2">
                    <a href="/guide/getting-started/start">Getting started</a>
                </li>
                <li class="top-level " data-level="1.3">
                    <a href="/guide/getting-started/connect">Connecting Your Device</a>
                </li>
                <li class="top-level " data-level="1.4">
                    <a href="/guide/getting-started/modes">Device Modes</a>
                </li>
                <li class="top-level " data-level="1.5">
                    <a href="/guide/getting-started/tinker">Tinker &amp; Mobile App</a>
                </li>
                <li class="top-level " data-level="1.6">
                    <a href="/guide/getting-started/build">Web IDE (Build)</a>
                </li>
                <li class="top-level " data-level="1.7">
                    <a href="/guide/getting-started/examples">Code Examples</a>
                </li>
                <li class="top-level " data-level="1.8">
                    <a href="/guide/getting-started/button">Internet Button</a>
                </li>
                <li class="top-level " data-level="1.9">
                    <a href="/guide/getting-started/contributing">Open Source</a>
                </li>
                <li class="top-level " data-level="1.10">
                    <a href="/guide/getting-started/hackathon">Hackathon</a>
                </li>
            </ol>
          </li>
        <li data-level="2" class="guide-section active-section">
          <h3 class="guide-section-titles" >Tools And Features</h3>
            <ol type="1">
                <li class="top-level " data-level="2.1">
                    <a href="/guide/tools-and-features/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="2.2">
                    <a href="/guide/tools-and-features/dev">Ruuvi Dev</a>
                </li>
                <li class="top-level " data-level="2.3">
                    <a href="/guide/tools-and-features/dashboard">Dashboard</a>
                </li>
                <li class="top-level " data-level="2.4">
                    <a href="/guide/tools-and-features/cli">Command Line</a>
                </li>
                <li class="top-level active" data-level="2.5">
                    <span>IFTTT</span>
                      <i id="toggle-in-page-nav" class="ion-minus"></i>
                </li>
                    <div class="in-page-toc-container">
                      <ul class="nav in-page-toc show">
                        <li class="middle-level" data-nav="introduction-Fqfi"><a href="#introduction" data-menu-href="introduction-Fqfi">Introduction</a></li>
                        <li class="middle-level" data-nav="parts-of-an-ifttt-recipe-BnAK"><i class="toggle-secondary-toc ion-arrow-right-b"></i><a href="#parts-of-an-ifttt-recipe" data-menu-href="parts-of-an-ifttt-recipe-BnAK">Parts of an IFTTT Recipe</a></li>
                            <ul class="nav secondary-in-page-toc">
                                <li data-secondary-nav="what-are-triggers--Mubc"><a href="#what-are-triggers-" data-menu-href="what-are-triggers--Mubc">What are triggers?</a></li>
                                <li data-secondary-nav="what-are-actions--3BKf"><a href="#what-are-actions-" data-menu-href="what-are-actions--3BKf">What are actions?</a></li>
                                <li data-secondary-nav="what-are-recipes--825I"><a href="#what-are-recipes-" data-menu-href="what-are-recipes--825I">What are Recipes?</a></li>
                                <li data-secondary-nav="what-are-ingredients--hVSA"><a href="#what-are-ingredients-" data-menu-href="what-are-ingredients--hVSA">What are ingredients?</a></li>
                                <li data-secondary-nav="before-you-build-with-ruuvi-ifttt-UeJl"><a href="#before-you-build-with-ruuvi-ifttt" data-menu-href="before-you-build-with-ruuvi-ifttt-UeJl">Before you build with Ruuvi + IFTTT</a></li>
                            </ul>
                        <li class="middle-level" data-nav="triggers-xUJM"><i class="toggle-secondary-toc ion-arrow-right-b"></i><a href="#triggers" data-menu-href="triggers-xUJM">Triggers</a></li>
                            <ul class="nav secondary-in-page-toc">
                                <li data-secondary-nav="new-event-published-MGhj"><a href="#new-event-published" data-menu-href="new-event-published-MGhj">New Event Published</a></li>
                                <li data-secondary-nav="trigger-fields-k4x1"><a href="#trigger-fields" data-menu-href="trigger-fields-k4x1">Trigger fields</a></li>
                                <li data-secondary-nav="monitor-a-variable-5GPg"><a href="#monitor-a-variable" data-menu-href="monitor-a-variable-5GPg">Monitor a variable</a></li>
                                <li data-secondary-nav="monitor-a-function-result-ZMP6"><a href="#monitor-a-function-result" data-menu-href="monitor-a-function-result-ZMP6">Monitor a function result</a></li>
                                <li data-secondary-nav="monitor-your-device-status-4f2U"><a href="#monitor-your-device-status" data-menu-href="monitor-your-device-status-4f2U">Monitor your device status</a></li>
                            </ul>
                      </ul>
                    </div>
                <li class="top-level " data-level="2.6">
                    <a href="/guide/tools-and-features/webhooks">Webhooks</a>
                </li>
            </ol>
          </li>
        <li data-level="3" class="guide-section ">
          <h3 class="guide-section-titles" >How To Build A Product</h3>
            <ol type="1">
                <li class="top-level " data-level="3.1">
                    <a href="/guide/how-to-build-a-product/intro">Introduction</a>
                </li>
                <li class="top-level " data-level="3.2">
                    <a href="/guide/how-to-build-a-product/pcb-design">Designing your own PCB</a>
                </li>
                <li class="top-level " data-level="3.3">
                    <a href="/guide/how-to-build-a-product/dashboard">Your Ruuvi Dashboard</a>
                </li>
                <li class="top-level " data-level="3.4">
                    <a href="/guide/how-to-build-a-product/authentication">Authentication &amp; Security</a>
                </li>
                <li class="top-level " data-level="3.5">
                    <a href="/guide/how-to-build-a-product/web-app">Building your own web app</a>
                </li>
                <li class="top-level " data-level="3.6">
                    <a href="/guide/how-to-build-a-product/mobile-app">Building your own mobile app (iOS and Android)</a>
                </li>
                <li class="top-level " data-level="3.7">
                    <a href="/guide/how-to-build-a-product/manufacturing">Manufacturing, programming, and testing</a>
                </li>
                <li class="top-level " data-level="3.8">
                    <a href="/guide/how-to-build-a-product/further-considerations">Further considerations</a>
                </li>
            </ol>
          </li>
      </ul>
      </div>
      <div class="page-body">
        <div class='content-inner'>
          <div class="content" >
            <h1 id="#ruuvi-channel-on-ifttt" data-href="ruuvi-channel-on-ifttt-IWmi">Ruuvi Channel on IFTTT<a href="#ruuvi-channel-on-ifttt" class="header-permalinks" data-menu-href="ruuvi-channel-on-ifttt-IWmi"><i class="ion-link"></i></a></h1><h2 id="#introduction" data-href="introduction-Fqfi">Introduction<a href="#introduction" class="header-permalinks" data-menu-href="introduction-Fqfi"><i class="ion-link"></i></a></h2><p>Anything you build with Ruuvi is now easily available on IFTTT! IFTTT is a service that lets you create powerful connections with one simple statement: "If this then that."  There is a great introduction to their ecosystem <a href="https://ifttt.com/wtf">on IFTTT's website</a>. Go check it out if you haven't already, it's super helpful.</p>
<p>The Ruuvi Channel on IFTTT will let you connect your devices to other powerful channels. You can now easily send and receive tweets, SMS, check the weather, respond to price changes, monitor astronauts, and much, much more. This page is a reference for you to use as you get your Particle Recipes set up.</p>
<p>If you're totally new to Ruuvi, that's okay! Before you get going on the Particle channel, be sure to get your RuuviTag or RuuviTracker connected and claimed. <a href="/guide/getting-started/start">Get started here</a>.</p>
<p>Lets go!</p>
<h2 id="#parts-of-an-ifttt-recipe" data-href="parts-of-an-ifttt-recipe-BnAK">Parts of an IFTTT Recipe<a href="#parts-of-an-ifttt-recipe" class="header-permalinks" data-menu-href="parts-of-an-ifttt-recipe-BnAK"><i class="ion-link"></i></a></h2><h3 id="#what-are-triggers-" data-href="what-are-triggers--Mubc">What are triggers?<a href="#what-are-triggers-" class="header-permalinks" data-menu-href="what-are-triggers--Mubc"><i class="ion-link"></i></a></h3><p>Triggers are the <em>this</em> part of a Recipe. Triggers are how IFTTT knows when to run your recipe. A trigger can be as conceptually simple as "is x greater than 5?" or "did I get new email?", and they frequently are!</p>
<h3 id="#what-are-actions-" data-href="what-are-actions--3BKf">What are actions?<a href="#what-are-actions-" class="header-permalinks" data-menu-href="what-are-actions--3BKf"><i class="ion-link"></i></a></h3><p>Actions are what IFTTT does when the answer to your trigger question is "yes!" When set up, you can have IFTTT email you, post for you, save info to Dropbox, or many other useful functions.</p>
<h3 id="#what-are-recipes-" data-href="what-are-recipes--825I">What are Recipes?<a href="#what-are-recipes-" class="header-permalinks" data-menu-href="what-are-recipes--825I"><i class="ion-link"></i></a></h3><p>A combination of a Trigger and an Action. IFTTT lets you connect triggers to actions.  Did someone tweet something interesting (that's a trigger), then turn my disco ball on (that's an action).</p>
<h3 id="#what-are-ingredients-" data-href="what-are-ingredients--hVSA">What are ingredients?<a href="#what-are-ingredients-" class="header-permalinks" data-menu-href="what-are-ingredients--hVSA"><i class="ion-link"></i></a></h3><p>Ingredients are pieces of data from a Trigger. Ingredient values are automatically found by IFTTT using certain aspects of your device and/or firmware. These pieces of data can be used when setting up the Action that goes with your created Trigger. For Ruuvi, ingredients will often include the name you've given your RuuviTracker or RuuviTag, the time that the trigger occurred, and any data that trigger returned.</p>
<p>Other IFTTT channels will provide (and sometimes automatically insert) their own ingredients. If ingredients are available, they can be found in the blue Erlenmeyer flask icon next to the relevant input box.</p>
<h3 id="#before-you-build-with-ruuvi-ifttt" data-href="before-you-build-with-ruuvi-ifttt-UeJl">Before you build with Ruuvi + IFTTT<a href="#before-you-build-with-ruuvi-ifttt" class="header-permalinks" data-menu-href="before-you-build-with-ruuvi-ifttt-UeJl"><i class="ion-link"></i></a></h3><p><strong>Firmware is key</strong>: IFTTT will pull directly from the firmware that is currently flashed to your devices. It will only show functions,variables,etc from firmware that is currently flashed to one of your devices. That means that if, for example, you're trying to use the "Monitor a Function" Trigger you'll need to have flashed firmware to your board that includes spark.function().</p>
<p><strong>But what if I want to try this without writing firmware?</strong> We recommend starting with the Monitor a Device Status Trigger. You can use this Trigger with the firmware that came with your device.</p>
<p><strong>Okay, I'm ready to build my own firmware. Where do I start?</strong> Get to know <a href="http://build.ruuvi.io/">the web IDE</a> and explore the Ruuvi <a href="http://community.particle.io/">community site</a> for great tutorials, examples and advice on projects.</p>
<h2 id="#triggers" data-href="triggers-xUJM">Triggers<a href="#triggers" class="header-permalinks" data-menu-href="triggers-xUJM"><i class="ion-link"></i></a></h2><h3 id="#new-event-published" data-href="new-event-published-MGhj">New Event Published<a href="#new-event-published" class="header-permalinks" data-menu-href="new-event-published-MGhj"><i class="ion-link"></i></a></h3><pre><code class="lang-C++">// SIMPLEST SYNTAX
Spark.publish(String eventName);

// EXAMPLE DEVICE CODE
Spark.publish("Boiling!");


// SYNTAX FOR SENDING DATA
Spark.publish(String eventName, String data);

// EXAMPLE DEVICE CODE
Spark.publish("Boiling!", "212");


// THE COMPLETE VERSION, useful for making events private
Spark.publish(String eventName, String data, int ttl, PRIVATE);

// EXAMPLE DEVICE CODE
Spark.publish("Boiling!", "212", 60, PRIVATE);
</code></pre>
<h4 id="#firmware-requirements" data-href="firmware-requirements-bD4j">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-bD4j"><i class="ion-link"></i></a></h4><p>To use this Trigger, firmware must include spark.publish(). Complete documentation on using <a href="/reference/firmware/#spark-publish-">Spark.publish() is here.</a></p>
<p>A word of caution - firmware loops quickly, so it's very easy to run publish() too frequently. You'll trigger your IFTTT recipe 100 times in a blink, and if you publish() more than once a second then the Ruuvi Cloud will briefly disable further publishes. Make sure to think through the logic of your code so that it only publishes when you actually want it to.</p>
<h3 id="#trigger-fields" data-href="trigger-fields-k4x1">Trigger fields<a href="#trigger-fields" class="header-permalinks" data-menu-href="trigger-fields-k4x1"><i class="ion-link"></i></a></h3><p><strong>If (Event Name):</strong> The name you gave to Spark.publish() in your firmware. Also referred to as topic, name or channel.</p>
<p><strong>is (Event Contents): </strong> <em>Optional</em> Any data you included with your Spark.publish call from firmware.</p>
<p><strong>Device Name or ID:</strong> This dropdown menu will be automatically populated with the names of Ruuvi devices that are claimed to your account and are loaded with firmware.</p>
<h4 id="#ingredients" data-href="ingredients-qa1j">Ingredients<a href="#ingredients" class="header-permalinks" data-menu-href="ingredients-qa1j"><i class="ion-link"></i></a></h4><p><strong>EventName:</strong> The name you gave to Spark.publish("name") in your firmware.</p>
<pre><code>// EXAMPLE EVENT NAME
allbuttons
</code></pre><p><strong>EventContents:</strong> What data the event contained <em>optional</em></p>
<pre><code>// EXAMPLE CONTENTS
"on"
</code></pre><p><strong>DeviceName:</strong> The name you provided when you claimed your Ruuvi device.</p>
<pre><code>// EXAMPLE DEVICE NAME
MyDevice
</code></pre><p><strong>CreatedAt:</strong> Date and time the event was published</p>
<pre><code>// EXAMPLE TIMESTAMP
January 12, 2015 at 6:59pm
</code></pre><h3 id="#monitor-a-variable" data-href="monitor-a-variable-5GPg">Monitor a variable<a href="#monitor-a-variable" class="header-permalinks" data-menu-href="monitor-a-variable-5GPg"><i class="ion-link"></i></a></h3><h4 id="#firmware-requirements" data-href="firmware-requirements-o8Zj">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-o8Zj"><i class="ion-link"></i></a></h4><p>Monitoring variables is also a simple way to get going. You'll need to create a variable at the top of your code, call Spark.variable() using the format to the right in the setup() function, and then you're good to go.</p>
<p>Complete documentation on using <a href="/reference/firmware/#spark-variable-">Spark.variable() is here.</a></p>
<pre><code class="lang-C++">// EXAMPLE SHOWING THREE DATA TYPES
int analogvalue = 0;
double tempC = 0;
char *message = "my name is ruuvi";

void setup()
{
  // variable name max length is 12 characters long
  Spark.variable("analogvalue", &amp;analogvalue, INT);
  Spark.variable("temp", &amp;tempC, DOUBLE);
  Spark.variable("mess", message, STRING);
  pinMode(A0, INPUT);
}

void loop()
{
  // Read the analog value of the sensor (TMP36)
  analogvalue = analogRead(A0);
  //Convert the reading into degree celcius
  tempC = (((analogvalue * 3.3)/4095) - 0.5) * 100;
  delay(200);
}
</code></pre>
<h4 id="#trigger-fields" data-href="trigger-fields-vQxR">Trigger fields<a href="#trigger-fields" class="header-permalinks" data-menu-href="trigger-fields-vQxR"><i class="ion-link"></i></a></h4><p><strong>If (Variable Name):</strong> Select the Spark.variable you'd like to use from an automatically populated dropdown menu. These options will be pulled from the firmware flashed to your claimed devices. No options will be displayed if your devices don't have Spark.variable()s defined, so check your code and reflash your firmware if it's empty.</p>
<pre><code>// EXAMPLE VARIABLE NAME
temperature
</code></pre><p><strong>is (Test Operation):</strong> Select a comparison based on a dropdown menu with options: greater, less than, equals, greater or equal, less or equal</p>
<p><strong>Comparison Value (Value to Test Against):</strong> The value that you are comparing with your Spark.variable().</p>
<pre><code>// EXAMPLE VALUE
90
</code></pre><h4 id="#ingredients" data-href="ingredients-lfJ3">Ingredients<a href="#ingredients" class="header-permalinks" data-menu-href="ingredients-lfJ3"><i class="ion-link"></i></a></h4><p><strong>Value:</strong> The actual value of your variable. While your trigger will be doing a comparison, you can also use the value it returned in your action. This is useful for logging to email, Dropbox, or spreadsheets.</p>
<pre><code>// EXAMPLE VALUE
72
</code></pre><p><strong>Variable:</strong> The name of the Spark.variable that you are measuring.</p>
<pre><code>// EXAMPLE VARIABLE NAME
temperature
</code></pre><p><strong>DeviceName:</strong> The device the variable came from.</p>
<pre><code>// EXAMPLE DEVICE NAME
MyDevice
</code></pre><p><strong>CreatedAt:</strong> Date and time the event was created.</p>
<pre><code>// EXAMPLE TIMESTAMP
January 17, 2015 at 7:52am
</code></pre><h3 id="#monitor-a-function-result" data-href="monitor-a-function-result-ZMP6">Monitor a function result<a href="#monitor-a-function-result" class="header-permalinks" data-menu-href="monitor-a-function-result-ZMP6"><i class="ion-link"></i></a></h3><pre><code class="lang-cpp">// SYNTAX TO REGISTER A SPARK FUNCTION
Spark.function("cloudNickname", firmwareFunctionName);
//                ^
//                |
//     (max of 12 characters long)

// EXAMPLE USAGE
int brewCoffee(String command);

void setup()
{
  // register the Spark function
  Spark.function("brew", brewCoffee);
}

void loop()
{
  // this loops forever, doing nothing
}

// this function automagically shows up in IFTTT
int brewCoffee(String command)
{
  // look for the matching argument "coffee" &lt;-- max of 64 characters long
  if(command == "coffee")
  {
    //things you want it to do
    activateWaterHeater();
    activateWaterPump();

    //Returns the value "1" if it was successful
    return 1;
  }
  else return -1;
}
</code></pre>
<p>Your Spark.function()s can be used in several ways with IFTTT. You can send a value to your function to look up data, perform behaviors before taking a measurement, or ask for something to happen and get a response when it's successful.</p>
<h4 id="#firmware-requirements" data-href="firmware-requirements-cOZQ">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-cOZQ"><i class="ion-link"></i></a></h4><p>All of the details are covered in the example to the right. Just remember to declare a function at the top of your code, make it Spark.function() in setup(), and then declare what the function does down below. Currently, only the first 4 Spark.function()s that you register will show up in IFTTT.</p>
<p>Complete documentation on using <a href="/reference/firmware/#spark-function-">Spark.function() is here.</a></p>
<h4 id="#trigger-fields" data-href="trigger-fields-j0B4">Trigger fields<a href="#trigger-fields" class="header-permalinks" data-menu-href="trigger-fields-j0B4"><i class="ion-link"></i></a></h4><p><strong>If the output value of (Function Name):</strong> The name of your function.</p>
<pre><code>// EXAMPLE USAGE
allLedsOn()
</code></pre><p><strong>when you send it (Value):</strong> <em>Optional</em> This is the data you're giving to the Spark.function() in your firmware.</p>
<pre><code>// EXAMPLE USAGE, RGB VALUES FOR COLOR
100,100,100
</code></pre><p><strong>is (Test Operation):</strong> Select a comparison based on a dropdown menu with options: greater, less than, equals, greater or equal, less or equal</p>
<p><strong>Comparison Value:</strong> The value that you are comparing with your Spark.function result.</p>
<h4 id="#ingredients" data-href="ingredients-25vn">Ingredients<a href="#ingredients" class="header-permalinks" data-menu-href="ingredients-25vn"><i class="ion-link"></i></a></h4><p><strong>FunctionName:</strong> The function you just called.</p>
<pre><code>// EXAMPLE USAGE
allLedsOn
</code></pre><p><strong>FunctionResult:</strong> The number returned when you call the function. This may be a value from a sensor, or it could be a 0 or 1 which will confirm whether your function occurred.</p>
<pre><code>// EXAMPLE USAGE
1
</code></pre><p><strong>DeviceName:</strong> The device the variable came from.</p>
<pre><code>// EXAMPLE USAGE
MyDevice
</code></pre><p><strong>CreatedAt:</strong> Date and time the event was created.</p>
<pre><code class="lang-C++">// EXAMPLE TIMESTAMP
May 2, 2013 at 9:02am
</code></pre>
<h3 id="#monitor-your-device-status" data-href="monitor-your-device-status-4f2U">Monitor your device status<a href="#monitor-your-device-status" class="header-permalinks" data-menu-href="monitor-your-device-status-4f2U"><i class="ion-link"></i></a></h3><h4 id="#firmware-requirements" data-href="firmware-requirements-GECE">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-GECE"><i class="ion-link"></i></a></h4><p>You must have firmware on your Ruuvi device, but nothing else is necessary. Basically, you're fine unless you've actively wiped your device.</p>
<h4 id="#trigger-fields" data-href="trigger-fields-BPcf">Trigger fields<a href="#trigger-fields" class="header-permalinks" data-menu-href="trigger-fields-BPcf"><i class="ion-link"></i></a></h4><p><strong>If (Device Name or ID:</strong> This dropdown menu will be automatically populated with the names of Ruuvi devices that are claimed to your account and are loaded with firmware.</p>
<p>  <strong>is (Status of your device):</strong> Selected from a dropdown menu - either online or offline.</p>
<h4 id="#ingredients" data-href="ingredients-iSCm">Ingredients<a href="#ingredients" class="header-permalinks" data-menu-href="ingredients-iSCm"><i class="ion-link"></i></a></h4><p>  <strong>DeviceName:</strong> The name of the device that changed status</p>
<pre><code class="lang-C++">  // EXAMPLE USAGE
  MyDevice
</code></pre>
<p>  <strong>Status:</strong> Indicates whether your device is online or offline</p>
<pre><code class="lang-C++">  // EXAMPLE USAGE
  Offline
</code></pre>
<p>  <strong>CreatedAt:</strong> Date and time that the status change occurred</p>
<pre><code class="lang-C++">  // EXAMPLE TIMESTAMP
  November 13, 2015 at 6:02pm
</code></pre>
<p>  ##Actions</p>
<p>  ###Publish an event</p>
<h4 id="#firmware-requirements" data-href="firmware-requirements-aSRT">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-aSRT"><i class="ion-link"></i></a></h4><p>  This action has IFTTT publishing an event, so your Ruuvi device needs to subscribe to that event. These are complementary; a Spark.subscribe("myEventName") watches for a publish("myEventName") and runs a function when it sees this matching event name. This means that even though this action is called <em>Publish</em> an event, your firmware needs to include Spark.subscribe().</p>
<pre><code class="lang-cpp">  int i = 0;

  void myHandler(const char *event, const char *data)
  {
    i++;
    Serial.print(i);
    Serial.print(event);
    Serial.print(", data: ");
    if (data)
    Serial.println(data);
    else
    Serial.println("NULL");
  }

  void setup()
  {
    Spark.subscribe("temperature", myHandler);
    Serial.begin(9600);
  }
</code></pre>
<p>  To use <code>Spark.subscribe()</code>, define a handler function and register it in <code>setup()</code>.</p>
<hr>
<p>  You can listen to events published only by your own RuuviTrackers by adding a <code>MY_DEVICES</code> constant.</p>
<pre><code class="lang-cpp">  // only events from my RuuviTrackers
  Spark.subscribe("the_event_prefix", theHandler, MY_DEVICES);
</code></pre>
<p>  Complete documentation on using <a href="/reference/firmware/#spark-subscribe-">Spark.subscribe() is here.</a></p>
<h4 id="#action-fields" data-href="action-fields-TxVF">Action fields<a href="#action-fields" class="header-permalinks" data-menu-href="action-fields-TxVF"><i class="ion-link"></i></a></h4><p>  <strong>Then publish (Event Name):</strong> This may be autopopulated by the Trigger you have chosen, however you'll want to delete that and write in the Event Name that you have defined in your firmware. Also known as topic, event name, or channel.</p>
<pre><code class="lang-C++">  // EXAMPLE USAGE
  temperature
</code></pre>
<p>  <strong>The event includes (Data):</strong> <em>Optional</em> The data that comes along with the event - a temperature value or sensor measurement for example.</p>
<p>  <strong>is this a public or private event?</strong> Select either private or public.</p>
<p>  ###Call a function</p>
<p>  It's important to note that if you turn off the board that is attached to this action while your recipe is still live, the IFTTT servers may disable your recipe. This is easy to fix, just turn it back on again. Your default IFTTT settings are set up to send you an email when your recipe encounters a serious issue (like not having a device to run the requested function). You can always change these by clicking on your username at the top of the IFTTT menu and selecting "Preferences".</p>
<h4 id="#firmware-requirements" data-href="firmware-requirements-WQvN">Firmware requirements<a href="#firmware-requirements" class="header-permalinks" data-menu-href="firmware-requirements-WQvN"><i class="ion-link"></i></a></h4><p>  This is very similar to using a Spark.function() as a trigger, only you won't be using any values it returns. The same setup on the firmware side, and the example code above for Spark.function() as trigger, will work for this as well.</p>
<p>  Complete documentation on using <a href="/reference/firmware/#spark-function-">Spark.function() is here.</a></p>
<h4 id="#action-fields" data-href="action-fields-WMpG">Action fields<a href="#action-fields" class="header-permalinks" data-menu-href="action-fields-WMpG"><i class="ion-link"></i></a></h4><p>  <strong>Then call (Function Name):</strong> Select the function you'd like to use from the options in a dropdown menu. These options will be pulled from the Spark.function()s that are in the firmware flashed to any of your claimed RuuviTrackers or RuuviTags. IFTTT will list the first 4 function()s defined in your firmware.</p>
<pre><code class="lang-C++">  // EXAMPLE USAGE
  brew
</code></pre>
<p>  <strong>with input (Function Input):</strong> This is an optional field. It may be automatically populated with ingredients from the trigger that you chose (i.e. Twitter may put in something like "Favorite tweet: TweetEmbedCode"). If you don't have specific code in your function() to use this data, it's best to delete it. There will be cases when you'll want to send some specific input.</p>
<p>  ##FAQs</p>
<ul>
<li><p>How often should I expect IFTTT to check my triggers?</p>
<p>After you create a recipe we'll check functions or variables once a minute and then notify IFTTT right away if your trigger happens.  Other channels will frequently take a while (up to 15 minutes) to trigger or perform their action.</p>
</li>
<li><p>IFTTT says there is an error or something in my recipe log... what gives?</p>
<p>Make sure your device is online and still running firmware that has the (event, function, variable, etc) that you linked in your recipe.  If your device isn't connected when IFTTT tries to call a function, it won't work.</p>
</li>
<li><p>I don't see my function in the list on IFTTT?</p>
<p>Make sure you flashed your firmware to your device with the function you've exposed, and try refreshing the IFTTT page.  You can confirm what functions are available using <a href="/guide/tools-and-features/dev/">Ruuvi Dev</a> and clicking the 'Cloud variables and functions' menu or in the <a href="https://github.com/spark/ruuvi-cli">Particle-CLI</a> by running <code>particle list</code></p>
</li>
<li><p>Why can I log in on build.ruuvi.io, but I can't log in on IFTTT?</p>
<p>Try just once more, and make sure that you're typing your username and password exactly how you entered it when creating your account.  The build site is a little more forgiving than others at the moment.</p>
</li>
</ul>

            <div class="mobile-arrows">
                <a href="/guide/tools-and-features/cli" class="arrow previous-arrow"><i class="ion-chevron-left"></i></a>
                <a href="/guide/tools-and-features/webhooks" class="arrow next-arrow"><i class="ion-chevron-right"></i></a>
            </div>
          </div>
        </div>
        <div class="desktop-arrows">
            <a href="/guide/tools-and-features/cli" class="arrow previous-arrow"><i class="ion-chevron-left"></i></a>
            <a href="/guide/tools-and-features/webhooks" class="arrow next-arrow"><i class="ion-chevron-right"></i></a>
        </div>
      </div>
    </div>
    <!-- SEGMENT -->
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
          analytics.load("PiTQtuDPGp3hKGGN3lU9GJvInSsnKBCR");
        analytics.page()
      }}();
    </script>
    <!-- Let me embed vines -->
    <script async src="https://platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>
    
    <!-- jQuery -->
    <script src="/assets/js/jquery-1.11.1.min.js"></script>
    
    <!-- Vendor theme mods -->
    <script src='/assets/js/jquery-styling.js'></script>
    <script src='/assets/js/bootstrap-dropdown.js'></script>
    <script src='/assets/js/prettify.js'></script>
    <script src='/assets/js/jquery.waypoints.js'></script>
    <script src='/assets/js/jquery.waypoints.inview.js'></script>
    <!-- Custom -->
    <script type="text/javascript" src="https://s3.amazonaws.com/redirect.ruuvi.io/redirect-banner.js"></script>
    <script type="text/javascript" src="/assets/js/lunr.min.js"></script>
    <script type="text/javascript" src="/assets/js/handlebars-runtime.js"></script>
    <script type="text/javascript" src="/assets/js/precompiled.js"></script>
    <script src='/assets/js/docs.js'></script>
    <script src='/assets/js/ga.js'></script>
    <script src='/assets/js/animated-ruuvitracker.js'></script>
    
    <!-- Live Reload -->
</body>
</html>
